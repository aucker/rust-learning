# 2022 Daily schedule of OS Tranining Camp

## Timeline

*July*

| Mon               | Tues              | Wed                          | Thur                         | Fri                          | Sat               | Sun               |
| ----------------- | ----------------- | ---------------------------- | ---------------------------- | ---------------------------- | ----------------- | ----------------- |
|                   |                   |                   |                   | 1 <br> ([D1](#day-1-202271)) | 2 <br> ([D2](#day-2-202272)) | 3 <br> ([D3](#day-3-202273)) | 
|4 <br> ([D4](#day-4-202274)) | 5 <br> ([D5](#day-5-202275)) | 6 <br> ([D6](#day-6-202276)) | 7 <br> ([D7](#day-7-202277)) | 8 <br> ([D8](#day-8-202278))       | 9 <br> ([D9](#day-9-202279))            | 10 <br> ([D10](#day-10-2022710))         | 
|11  <br>  ([D11](#day-11-2022711))             | 12      <br>    ([D12](#day-12-2022712))       | 13    <br>    ([D13](#day-13-2022713))             | 14         <br>    ([D14](#day-14-2020711))        | 15        <br>    ([D15](#day-15-2022715))                    | 16    <br>     ([D16](#day-16-2022716))                       | 17    <br>      ([D17](#day-17-2022717))                       |
|18    <br>    ([D18](#day-18-2020718))            | 19   <br>     ([D19](#day-19-2022719))            | 20   <br>    ([D20](#day-20-2022720))            | 21       <br>    ([D21](#day-21-2022721))         | 22     <br>    ([D22](#day-22-2022722))                         | 23     <br>    ([D23](#day-23-2022723))                         | 24    <br>    ([D24](#day-24-2022724))                        | 
|25      <br>    ([D25](#day-25-2022725))             | 26         <br>    ([D26](#day-26-2022726))           | 27         <br>    ([D27](#day-27-2022727))           | 28       <br>    ([D28](#day-28-2022728))           | 29         <br>    ([D29](#day-29-2022729))                    | 30        <br>    ([D30](#day-30-2022730))                     | 31     <br>    ([D31](#day-31-2022731))                           |

------

## Day 1 2022/7/1

### OS Tranining Camp

åœ¨Telegramç¾¤é‡Œçœ‹åˆ°äº†å¼ æ±‰ä¸œè€å¸ˆåˆ†äº«çš„OSè®­ç»ƒè¥é“¾æ¥ï¼Œå› ä¸ºæœ¬ç§‘æ²¡æœ‰å¥½å¥½å­¦ä¹ OSè¯¾ç¨‹ï¼Œæœ€è¿‘åˆçœ‹äº†è’‹ç‚å²©è€å¸ˆçš„å‡ èŠ‚ç½‘è¯¾ï¼Œæ·±å—æ„Ÿè§¦ï¼Œæœ€å…³é”®çš„æ˜¯è¿™é—¨è¯¾ç¨‹è¿˜æ˜¯ç”¨Rustæ¥å®ç°çš„ï¼Œé‚å†³å®šé‡æ–°å­¦ä¹ OSã€‚æˆ‘ä»å»å¹´å°±å…¥å‘äº†Rustï¼Œå½“æ—¶å°±æ˜¯å•ƒsteve klabnikçš„é‚£æœ¬TRPLï¼Œå½“æ—¶æ„Ÿè§‰è¿˜æœ‰è¿™ç§è¯­è¨€ï¼Œè¿ä¹¦éƒ½æ˜¯å¼€æºçš„ï¼Œè€Œä¸”é…ç½®è¿‡ç¨‹å®Œå…¨æ— ç—›ï¼Œä¸€è¡Œå‘½ä»¤å°±å®Œäº‹äº†ã€‚è™½ç„¶å·²ç»å•ƒå®Œäº†ä¸€éTRPLï¼Œä½†æ˜¯Rustæœ‰äº›ä¸œè¥¿è¿˜æ˜¯å¤ªéš¾ï¼Œå„ç§ä¸œè¥¿å¾ˆçç¢ã€‚æœ€ä¸ºä¸»è¦çš„åŸå› è¿˜æ˜¯ç¼ºä¹å®è·µã€‚

æ­£å¥½é€šè¿‡è¿™ä¸ªæœºä¼šé‡æ–°è®¤è¯†OSï¼ŒåŠ æ·±å¯¹Rustçš„ç†è§£ã€‚

ä»Šå¤©åœ¨GitHub classroomé‡Œé…ç½®äº†é¡¹ç›®ï¼Œä¹‹ååœ¨codespaceä¸­å®Œæˆäº†rustï¼Œriscvå·¥å…·é“¾çš„å®‰è£…é…ç½®ï¼ŒåŒæ—¶æ­£åœ¨çœ‹lab0-0çš„æ–‡æ¡£ã€‚

codespaceï¼š
* Pros:
    * no need to configure the proxy
    * network speed is fast
* Cons:
    * some bugs
    * rust-analyzer doesn't work well

### Plans: 

å®Œæˆscheduleä¸­çš„Rustå°æµ‹è¯•
å¿«é€Ÿå­¦ä¹ riscvç›¸å…³çŸ¥è¯†

## Day 2 2022/7/2

### OS Training Camp

è™½ç„¶codespaceå¾ˆæ–¹ä¾¿ï¼Œä¸ç”¨é…ç½®proxyï¼Œä½†æ˜¯å»¶è¿Ÿä¹Ÿå¤ªé«˜äº†å§ï¼Œè€Œä¸”rust-analyzerè¿˜æœ‰bugï¼Œç„¶åæˆ‘çªç„¶æƒ³èµ·æ¥å‰æ®µæ—¶é—´è¿˜æœ‰ä¸€å°é—²ç½®çš„åä¸ºäº‘æœåŠ¡å™¨ï¼ŒUbuntuå°±æ˜¯ä¸åŒæŠ˜è…¾ï¼Œç„¶åå°†codespaceç¯å¢ƒè¿ç§»åˆ°åä¸ºäº‘ï¼Œé…ç½®å¥½ç¯å¢ƒä¹‹åå°±å¯ä»¥å¹²æ´»äº†ã€‚

éœ€è¦åšçš„ä¸å¤šï¼Œæ— éæ˜¯æ¢ä¸€ä¸ªæºï¼Œä¹‹årusttoolchainï¼Œriscvé‡æ–°ä¸‹è½½ç¼–è¯‘ï¼Œå°±æ˜¯è¿™ä¸ªç¼–è¯‘é€Ÿåº¦æœ‰ç‚¹æ…¢ã€‚

* rust-toolchain
  * ä½¿ç”¨ustcæº
    
    ```shell
    <!-- export RUSTUP_DIST_SERVER=https://mirrors.tuna.edu.cn/rustup
    export RUSTUP_UPDATE_ROOT=https://mirrors.tuna.edu.cn/rustup/rustup -->
    export RUSTUP_DIST_SERVER=https://mirrors.ustc.edu.cn/rust-static
    export RUSTUP_UPDATE_ROOT=https://mirrors.ustc.edu.cn/rust-static/rustup
    ```
  * å®‰è£…rust
    ```shell
    curl https://sh.rustup.rs -sSf | sh
    ```
  * é…ç½®cargoï¼Œåœ¨`~/.cargo/config`ä¸­æ·»åŠ ï¼š
    ```shell
    <!-- [source.crates-io]
    replace-with = 'tuna'

    [source.tuna]
    registry = "https://mirrors.tuna.tsinghua.edu.cn/git/crates.io-index.git" -->
    [source.crates-io]
    registry = "https://github.com/rust-lang/crates.io-index"
    replace-with = 'ustc'
    [source.ustc]
    registry = "git://mirrors.ustc.edu.cn/crates.io-index"
    ```
* riscv
  * ä»å®˜ç½‘ä¸‹è½½æºç 
    ```shell
    wget https://download.qemu.org/qemu-7.0.0.tar.xz
    ```
    *è§£å‹æ—¶ç”¨å‘½ä»¤* `tar xvJf qemu*`
  * å®‰è£…ç¼–è¯‘æ‰€éœ€ä¾èµ–
    ```shell
    sudo apt install autoconf automake autotools-dev curl libmpc-dev libmpfr-dev libgmp-dev \
              gawk build-essential bison flex texinfo gperf libtool patchutils bc \
              zlib1g-dev libexpat-dev pkg-config  libglib2.0-dev libpixman-1-dev git tmux python3 ninja-build
    ```
  * ç¼–è¯‘
    ```shell
    cd qemu-7.0.0
    ./configure --target-list=riscv64-softmmu,riscv64-linux-user
    make -j$(nproc)
    ```
  * å®‰è£…
    ```shell
    sudo make install
    ```
    è¿™ä¼šå°†qemuå®‰è£…åˆ°`/usr/local/share`ç›®å½•ä¸‹,ä¹‹ååœ¨`~/.zshrc`ä¸­æ·»åŠ å¦‚ä¸‹
    ```shell
    export PATH=$PATH:/home/aucker/Downloads/build/qemu-7.0.0/riscv64-softmmu
    export PATH=$PATH:/home/aucker/Downloads/build/qemu-7.0.0/riscv64-linux-user
    export PATH=$PATH:/home/aucker/Downloads/build/qemu-7.0.0
    ```
    ä¹‹åç¡®è®¤riscvçš„ç‰ˆæœ¬
    ```shell
    âœ  qemu-7.0.0 qemu-system-riscv64 --version
    QEMU emulator version 7.0.0
    Copyright (c) 2003-2022 Fabrice Bellard and the QEMU Project developers
    âœ  qemu-7.0.0 qemu-riscv64 --version
    qemu-riscv64 version 7.0.0
    Copyright (c) 2003-2022 Fabrice Bellard and the QEMU Project developers
    ```

* rCore-Tutorialï¼š

    å¥½åƒå¿˜è®°äº†åä¸ºäº‘gitä¸å¥½ç”¨ï¼Œæˆ‘ç›´æ¥å‚»çœ¼ğŸ˜¯ï¼Œéš¾é“å¿…é¡»è¦å»codespaceå—ï¼Ÿ:cry:å…¶å®WSL2ä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©:yum:

```shell
âœ  qemu-7.0.0 realpath -s riscv64-mmu
/home/aucker/Downloads/build/qemu-7.0.0/riscv64-mmu
```
`realpath` can get the full path of the file.

## Day 3 2022/7/3

### OS Training Camp

**æ³¨ï¼š** ä»¥ä¸‹æ“ä½œå‡ä¸ºåœ¨GitHub codespaceä¸­æ‰§è¡Œçš„ç»“æœ

ç¾¤å‹åˆ†äº«äº†ä¸€å¼ å…³äºæ™ºèƒ½æŒ‡é’ˆçš„å›¾ç‰‡ï¼š
![smart pointer in Rust](./../_images/rust_smart_pointer.jpg)

ä»Šå¤©è·Ÿç€æ•™ç¨‹å®Œæˆäº†ç¬¬ä¸€éƒ¨åˆ†çš„å®éªŒã€‚

**åº”ç”¨ç¨‹åºæ‰§è¡Œç¯å¢ƒ**

åœ¨é€šç”¨æ“ä½œç³»ç»Ÿ(å¦‚Linux)ä¸Šè¿è¡Œåº”ç”¨ç¨‹åºï¼Œéœ€è¦å¤šå±‚æ¬¡çš„æ‰§è¡Œç¯å¢ƒæ ˆæ”¯æŒï¼š
![app software stack](../_images/app-software-stack.png)

ç¼–è¯‘å™¨åœ¨ç¼–è¯‘ã€é“¾æ¥å¾—åˆ°å¯æ‰§è¡Œæ–‡ä»¶æ—¶éœ€è¦çŸ¥é“ï¼Œç¨‹åºè¦åœ¨å“ªä¸ª**å¹³å°Platform**ä¸Šè¿è¡Œï¼Œ**ç›®æ ‡ä¸‰å…ƒç»„Target Triplet**æè¿°äº†ç›®æ ‡å¹³å°çš„CPUæŒ‡ä»¤é›†ã€æ“ä½œç³»ç»Ÿç±»å‹å’Œæ ‡å‡†è¿è¡Œæ—¶åº“ã€‚

```shell
âœ rustc --version --verbose
rustc 1.61.0 (fe5b13d68 2022-05-18)
binary: rustc
commit-hash: fe5b13d681f25ee6474be29d748c65adcd91f69e
commit-date: 2022-05-18
host: x86_64-unknown-linux-gnu
release: 1.61.0
LLVM version: 14.0.0
```
`host`è¡¨æ˜ç›®æ ‡é»˜è®¤å¹³å°æ˜¯`x86_64-unknown-linux-gnu`,CPUæ¶æ„æ˜¯x86_64ï¼Œå‚å•†unknownï¼Œæ“ä½œç³»ç»Ÿä¸ºLinuxï¼Œè¿è¡Œæ—¶åº“ä¸ºgnu libcã€‚

å®éªŒä¸€çš„ç›®çš„æ˜¯å°†åˆå§‹ç¨‹åºç§»æ¤åˆ°RISCVç›®æ ‡å¹³å°`riscv64gc-unknown-none-elf`ä¸Šè¿è¡Œã€‚

å…¶ä¸­ï¼Œ`elf`è¡¨ç¤ºæ²¡æœ‰æ ‡å‡†çš„è¿è¡Œæ—¶åº“ã€‚æ²¡æœ‰ä»»ä½•ç³»ç»Ÿè°ƒç”¨çš„å°è£…æ”¯æŒï¼Œä½†å¯ä»¥ç”ŸæˆELFæ ¼å¼çš„æ‰§è¡Œç¨‹åºã€‚ä¸é€‰æ‹©æœ‰`linux-gnu`æ”¯æŒçš„`riscv64gc-unknown-linux-gnu`ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬çš„ç›®æ ‡æ˜¯å¼€å‘æ“ä½œç³»ç»Ÿå†…æ ¸è€Œéåœ¨Linuxæ“ä½œç³»ç»Ÿä¸Šæ‰§è¡Œåº”ç”¨ç¨‹åºã€‚

**ä¿®æ”¹ç›®æ ‡å¹³å°**

å°†ç¨‹åºçš„ç›®æ ‡å¹³å°æ¢æˆ`riscv64gc-unknown-none-elf`ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š
```shell
âœ  os git:(main) âœ— cargo run --target riscv64gc-unknown-none-elf
   Compiling os v0.1.0 (/home/aucker/rust-learning/OS_lab/my_os_toy/os)
error[E0463]: can't find crate for `std`
  |
  = note: the `riscv64gc-unknown-none-elf` target may not be installed
  = help: consider downloading the target with `rustup target add riscv64gc-unknown-none-elf`
```

æŠ¥é”™çš„åŸå› æ˜¯ç›®æ ‡å¹³å°ä¸Šç¡®å®æ²¡æœ‰Rustæ ‡å‡†åº“stdï¼Œä¹Ÿä¸å­˜åœ¨ä»»ä½•å—OSæ”¯æŒçš„ç³»ç»Ÿè°ƒç”¨ã€‚è¿™æ ·çš„å¹³å°è¢«ç§°ä½œ**è£¸æœºå¹³å° bare-metal**ã€‚Luckilyï¼ŒRustè¿˜æœ‰ä¸€ä¸ªä¸éœ€è¦ä»»ä½•æ“ä½œç³»ç»Ÿæ”¯æŒçš„æ ¸å¿ƒåº“**core**ï¼Œå®ƒåŒ…å«äº†Rustçš„ç›¸å½“ä¸€éƒ¨åˆ†æ ¸å¿ƒæœºåˆ¶ã€‚æœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹åº“ä¹Ÿä¸ä¾èµ–æ ‡å‡†åº“stdï¼Œè€Œä»…ä»…ä¾èµ–æ ¸å¿ƒåº“coreã€‚

æ­¥éª¤å¦‚ä¸‹ï¼š

* **Remove the dependency of the std library**

  é¦–å…ˆåœ¨`os`ç›®å½•ä¸‹æ–°å»º`.cargo`ç›®å½•ï¼Œå¹¶åœ¨è¿™ä¸ªç›®å½•ä¸‹åˆ›å»º`config`æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

  ```toml
  [build]
  target = "riscv64gc-unknown-none-elf"
  ```

  è¿™å°†ä½¿cargoå·¥å…·åœ¨osç›®å½•ä¸‹é»˜è®¤ä¼šä½¿ç”¨riscv64gc-unknown-none-elfä½œä¸ºç›®æ ‡å¹³å°ã€‚è¿™ç§ç¼–è¯‘å™¨è¿è¡Œçš„å¹³å°(x86_64)ä¸å¯æ‰§è¡Œæ–‡ä»¶è¿è¡Œçš„ç›®æ ‡å¹³å°ä¸åŒçš„æƒ…å†µï¼Œç§°ä¸º**äº¤å‰ç¼–è¯‘ Cross Compile**ã€‚

  * Remove `println!()`
  æˆ‘ä»¬åœ¨`main.rs`å¼€å¤´åŠ ä¸Š`#![no_std]`ï¼Œè¿™æ ·ç¼–è¯‘å™¨å°±ä¸ä¼šä½¿ç”¨æ ‡å‡†åº“std,è½¬è€Œä½¿ç”¨æ ¸å¿ƒåº“`core`ã€‚
  * Provide `panic_handler()` 
  æ ‡å‡†åº“stdæä¾›äº†Rusté”™è¯¯å¤„ç†å‡½æ•°#[panic_handler]ï¼Œè¿™ä¸ªå‡½æ•°ä¼šåœ¨ç¨‹åºå‡ºç°é”™è¯¯æ—¶è¢«è°ƒç”¨,æ‰“å°å‡ºé”™ä½ç½®å’ŒåŸå› å¹¶æ€æ­»å½“å‰åº”ç”¨ã€‚coreåº“ä¸­å¹¶æ²¡æœ‰è¿™é¡¹åŠŸèƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è‡ªå·±å®ç°è¿™ä¸ªå‡½æ•°ã€‚
    ```rust
    // os/src/lang_items.rs
    use core::panic::PanicInfo;

    #[panic_handler]
    fn panic_handler(_info: &PanicInfo) -> ! {
      loop {}
    }
    ```
  * Remove `main()`
  Then we build this program again, we got the following errors:
    > **Error**
    >
    > ```shell
    > âœ  os git:(main) âœ— cargo build
    > Compiling os v0.1.0 (/home/aucker/rust-learning/OS_lab/my_os_toy/os)
    > error: requires `start` lang_item
    > 
    > error: could not compile `os` due to previous error
    > ```
    we need `start`. `start` represents what `std` library needs to do some initialization work before executing a program.

    We add `#![no_main]` to inform the compiler that we don't have a `main` function. And compiler don't need to consider the initialization work. 

    Now, we finally remove all the `std` library dependencies, the codes look like this:
    ```rust
    // os/src/main.rs
    #![no_std]
    #![no_main]

    mod lang_items;

    // os/src/lang_items.rs
    use core::panic::PanicInfo;

    #[panic_handler]
    fn panic_handler(_info: &PanicInfo) -> ! {
      loop {}
    }
    ```

  * Analyze the program that was removed the `std` library
  
    We need `rust-readobj`, use `cargo install rust-readobj` to install it.
  
    We can use some tools to analyze the program:
  
    ```shell
    âœ  os git:(main) âœ— file target/riscv64gc-unknown-none-elf/debug/os           
    target/riscv64gc-unknown-none-elf/debug/os: ELF 64-bit LSB executable, UCB RISC-V, version 1 (SYSV), statically linked, with debug_info, not stripped
    âœ  os git:(main) âœ— rust-readobj -h target/riscv64gc-unknown-none-elf/debug/os

    File: target/riscv64gc-unknown-none-elf/debug/os
    Format: elf64-littleriscv
    Arch: riscv64
    AddressSize: 64bit
    LoadName: <Not found>
    ElfHeader {
      Ident {
        Magic: (7F 45 4C 46)
        Class: 64-bit (0x2)
        DataEncoding: LittleEndian (0x1)
        FileVersion: 1
        OS/ABI: SystemV (0x0)
        ABIVersion: 0
        Unused: (00 00 00 00 00 00 00)
      }
    Type: Executable (0x2)
    Machine: EM_RISCV (0xF3)
    Version: 1
    Entry: 0x0
    ProgramHeaderOffset: 0x40
    SectionHeaderOffset: 0x1B40
    Flags [ (0x5)
      EF_RISCV_FLOAT_ABI_DOUBLE (0x4)
      EF_RISCV_RVC (0x1)
    ]
    HeaderSize: 64
    ProgramHeaderEntrySize: 56
    ProgramHeaderCount: 3
    SectionHeaderEntrySize: 64
    SectionHeaderCount: 14
    StringTableSectionIndex: 12
    }
    âœ  os git:(main) âœ— rust-objdump -S target/riscv64gc-unknown-none-elf/debug/os

    target/riscv64gc-unknown-none-elf/debug/os:     file format elf64-littleriscv
    ```

    é€šè¿‡`file`å¯¹äºŒè¿›åˆ¶æ–‡ä»¶`os`çš„åˆ†æå¯ä»¥çœ‹åˆ°ï¼Œå®ƒå¥½åƒæ˜¯ä¸€ä¸ªåˆæ³•çš„RV64æ‰§è¡Œç¨‹åºï¼Œä½†`rust-readobj`æ˜¾ç¤ºå®ƒçš„å…¥å£åœ°å€Entryæ˜¯`0`.å†é€šè¿‡`rust-objdump`å¯¹å®ƒåæ±‡ç¼–ï¼Œæ²¡æœ‰ç”Ÿæˆä»»ä½•æ±‡ç¼–ä»£ç ã€‚å¯è§è¯¥äºŒè¿›åˆ¶ç¨‹åºè™½ç„¶åˆæ³•ï¼Œä½†å®ƒæ˜¯ä¸€ä¸ªç©ºç¨‹åºï¼ŒåŸå› æ˜¯ç¼ºå°‘äº†ç¼–è¯‘å™¨è§„å®šçš„å…¥å£å‡½æ•°`_start`ã€‚

* **æ„å»ºç”¨æˆ·æ€æ‰§è¡Œç¯å¢ƒ**

> **Note**
> QEMU has two running mode:
> `User mode`, such as `qemu-riscv64`, it can simulate different CPUs' User mode instructions execution, and directly parse ELF executable file, load and execute user mode Linux applications.
> `System mode`, such as `qemu-system-riscv64`, it can simulate a complete hardware system based on different CPUs, including CPU, memory, peripherals, and so on. 



### Day 4 2022/7/4

ä»Šå¤©é‡æ–°å›é¡¾äº†rustling

**Plansï¼š** å®Œæˆrustlingä¸­çš„ç»ƒä¹ é¢˜

### Day 5 2022/7/5

ä»Šå¤©çš„ç›®æ ‡æ˜¯å®Œæˆrustlingsä¸­çš„ç»ƒä¹ é¢˜

* Shadowing in Rust
https://doc.rust-lang.org/book/ch03-01-variables-and-mutability.html#shadowing

* CONSTANT
const must come with a TYPE annotation.
https://doc.rust-lang.org/book/ch03-01-variables-and-mutability.html#constants


### Day 6 2022/7/6

[Ownership in Rust: References and Borrowing](https://doc.rust-lang.org/stable/book/ch04-02-references-and-borrowing.html)

```rust
// move_semantics.rs

fn main() {
    let data = "Rust is great!".to_string();

    get_char(&data);

    string_uppercase(data);
}

// Should not take ownership
fn get_char(data: &String) -> char {
    data.chars().last().unwrap()
}

// Should take ownership
fn string_uppercase(mut data: String) {
    data = data.to_uppercase();

    println!("{}", data);
}
```

In Rust, `String` doesn't implement `Copy` trait, so it can't be copied.

Get a slice out of an array:
```rust
// primitive_types4.rs
#[test]
fn slice_out_of_array() {
    let a = [1, 2, 3, 4, 5];

    let nice_slice = &a[1 .. 4];

    assert_eq!([2, 3, 4], nice_slice)
}
```

The [Tuple Type](https://doc.rust-lang.org/book/ch03-02-data-types.html#the-tuple-type) is awesomeï¼

```rust
// primitive_types5.rs
fn main() {
  let cat = ("Furry McFurson", 3.5);
  let (name, age)/* your pattern here */ = cat;

  println!("{} is {} years old.", name, age);
}
```

The different [Structs](https://doc.rust-lang.org/book/ch05-01-defining-structs.html) in Rust.

```rust
// structs.rs

struct ColorClassicStruct {
    name: String,
    hex: String,
}
struct ColorTupleStruct<'a, 'b>(&'a str, &'b str);
// well, well, well, here comes with lifetime variables
#[derive(Debug)]
struct UnitStruct;

let green = ColorClassicStruct {
    // name: "green".to_string(),
    // hex: "#00FF00".to_string(),
    name: String::from("green"),
    hex: String::from("#00FF00"),
};

let green = ColorTupleStruct("green", "#00FF00");

let unit_struct = UnitStruct;
```

enum3.rs in Rustlings is very interesting for reference. Use the [match](https://doc.rust-lang.org/book/ch18-03-pattern-syntax.html?highlight=match#multiple-patterns) in Rust.

Plus, modules3.rs in Rustlings is also interesting to implement.

Remember the initialization of HashMap:
```rust
// hashmap.rs
let mut basket = HashMap::new();
basket.insert("apple", 1);
```

**Rustlings**: finish the 66% of rustlings exercises.

### Day 7 2022/7/7

**Rustlings**: I'll finish the rest of the rustlings exercises.

The trait `std::fmt::Display` is not implemented for `HashMap` and `Option<Option<i8>>`.

So in format strings use `{:?}` instead of `{}`.

Option is so hard.

### Day 8 2022/7/8

Finished the rustlings tests, but some questions still not quite understood.

Plus, I finished lab0-1

### Day 9 2022/7/9

* å®Œæˆäº†rustlingsçš„å†…å®¹ï¼ŒåŒæ—¶å®Œæˆäº†å®éªŒå…ˆå¯¼lab0ã€‚
* ä¹‹å‰åœ¨WSL2ä¸­é…ç½®çš„ubuntu20.04ç”¨vscodeæœ¬æ¥æŒºèˆ’æœçš„ï¼Œä½†æ˜¯åæ¥å‘ç°16Gçš„å†…å­˜å¼€å‡ ä¸ªvscodeå°±å¡èµ·æ¥äº†ï¼Œèµ„æºç®¡ç†å™¨ä¸­vemmå†…å­˜å ç”¨æé«˜ï¼Œè€Œåä¸ºäº‘æœåŠ¡å™¨åˆä¸èƒ½æ­£å¸¸ä½¿ç”¨githubï¼Œå› æ­¤æœ€ç»ˆå†³å®šåœ¨ubuntuä¸Šå®Œæˆæ¥ä¸‹æ¥çš„å®éªŒã€‚
* All in ubuntuã€‚å®Œæˆubuntuçš„å®‰è£…ä»¥åŠæ‰€éœ€è½¯ä»¶çš„å®‰è£…é…ç½®ã€‚

### Day 10 2022/7/10

* å¼€å§‹è¿›è¡Œlab1çš„å®éªŒï¼Œå¯¹ç…§å®éªŒæ‰‹å†Œå°†lab1ä¸­çš„ä»£ç çœ‹æ‡‚ï¼Œå¹¶ç†Ÿæ‚‰ä»£ç ç»“æ„
* å¼€å§‹å­¦ä¹ ç†Ÿæ‚‰risc-vä¸­çš„ç›¸å…³æŒ‡ä»¤å’Œæ±‡ç¼–ä»£ç 
* å­¦ä¹ rustçš„

### Day 11 2022/7/11

```rust
// syscall/process.rs
/// YOUR JOB: Finish sys_task_info to pass testcases
pub fn sys_task_info(ti: *mut TaskInfo) -> isize {
    // -1
    set_task_info(ti);
    0
}
```

* é€šè¿‡äº†lab1çš„CIæµ‹è¯•

![lab1-os3](../_images/lab1-os3.png)

### Day 12 2022/7/12

### Day 13 2022/7/13

### Day 14 2022/7/14

### Day 15 2022/7/15

```rust
// syscall/process.rs
// YOUR JOB: å¼•å…¥è™šåœ°å€åé‡å†™ sys_get_time
pub fn sys_get_time(ts: *mut TimeVal, _tz: usize) -> isize {
    let us = get_time_us();
    // unsafe {
    //     *ts = TimeVal {
    //         sec: us / 1_000_000,
    //         usec: us % 1_000_000,
    //     };
    // }
    translated_assign_ptr(
        current_user_token(),
        ts,
        TimeVal {
            sec: us / 1_000_000,
            usec: us % 1_000_000,
        }
    );
    0
}

...

// YOUR JOB: æ‰©å±•å†…æ ¸ä»¥å®ç° sys_mmap å’Œ sys_munmap
pub fn sys_mmap(start: usize, len: usize, port: usize) -> isize {
    // -1
    mmap_in_current_memory_set(start, len, port)
}

pub fn sys_munmap(start: usize, len: usize) -> isize {
    // -1
    munmap_in_current_memory_set(start, len)
}

// YOUR JOB: å¼•å…¥è™šåœ°å€åé‡å†™ sys_task_info
pub fn sys_task_info(ti: *mut TaskInfo) -> isize {
    // -1
    translated_assign_ptr(
        current_user_token(),
        ti,
        get_task_info()
    );
    0
}
```

### Day 16 2022/7/16

* é€šè¿‡äº†lab2çš„CIæµ‹è¯•

![lab2-os4](../_images/lab2-os4.png)

### Day 17 2022/7/17

### Day 18 2022/7/18

### Day 19 2022/7/19

### Day 20 2022/7/20

### Day 21 2022/7/21

### Day 22 2022/7/22

### Day 23 2022/7/23

### Day 24 2022/7/24

### Day 25 2022/7/25

### Day 26 2022/7/26

### Day 27 2022/7/27

```rust
/// YOUR JOB: å¼•å…¥è™šåœ°å€åé‡å†™ sys_get_time
pub fn sys_get_time(ts: *mut TimeVal, _tz: usize) -> isize {
    let us = get_time_us();
    let bufs = translated_large_type::<TimeVal>(current_user_token(), ts);
    unsafe {
        copy_type_into_bufs::<TimeVal>(
            &TimeVal {
                sec: us / 1_000_000,
                usec: us % 1_000_000,
            },
            bufs
        );
    }
    0
}

...

// YOUR JOB: å¼•å…¥è™šåœ°å€åé‡å†™ sys_task_info
pub fn sys_task_info(ti: *mut TaskInfo) -> isize {
  ...

// YOUR JOB: å®ç°sys_set_priorityï¼Œä¸ºä»»åŠ¡æ·»åŠ ä¼˜å…ˆçº§
pub fn sys_set_priority(prio: isize) -> isize {
  ...

// YOUR JOB: æ‰©å±•å†…æ ¸ä»¥å®ç° sys_mmap å’Œ sys_munmap
pub fn sys_mmap(start: usize, len: usize, port: usize) -> isize {
  ...
pub fn sys_munmap(start: usize, len: usize) -> isize {
  ...

// YOUR JOB: å®ç° sys_spawn ç³»ç»Ÿè°ƒç”¨
// ALERT: æ³¨æ„åœ¨å®ç° SPAWN æ—¶ä¸éœ€è¦å¤åˆ¶çˆ¶è¿›ç¨‹åœ°å€ç©ºé—´ï¼ŒSPAWN != FORK + EXEC 
pub fn sys_spawn(path: *const u8) -> isize {
  ...
```

### Day 28 2022/7/28

* é€šè¿‡äº†lab3çš„CIæµ‹è¯•

![lab3-os5](../_images/lab3-os5.png)

### Day 29 2022/7/29

### Day 30 2022/7/30

### Day 31 2022/7/31
