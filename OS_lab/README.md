# 2022 Daily schedule of OS Tranining Camp

## Timeline

*July*

| Mon               | Tues              | Wed                          | Thur                         | Fri                          | Sat               | Sun               |
| ----------------- | ----------------- | ---------------------------- | ---------------------------- | ---------------------------- | ----------------- | ----------------- |
|                   |                   |                   |                   | 1 <br> ([D1](#day-1-202271)) | 2 <br> ([D2](#day-2-202272)) | 3 <br> ([D3](#day-3-202273)) | 
|4 <br> ([D4](#day-4-202274)) | 5 <br> ([D5](#day-5-202275)) | 6 <br> ([D6](#day-6-202276)) | 7 <br> ([D7](#day-7-202277)) | 8 <br> ([D8](#day-8-202278))       | 9 <br> ([D9](#day-9-202279))            | 10 <br> ([D10](#day-10-2022710))         | 
|11  <br>  ([D11](#day-11-2022711))             | 12      <br>    ([D12](#day-12-2022712))       | 13    <br>    ([D13](#day-13-2022713))             | 14         <br>    ([D14](#day-14-2020711))        | 15        <br>    ([D15](#day-15-2022715))                    | 16    <br>     ([D16](#day-16-2022716))                       | 17    <br>      ([D17](#day-17-2022717))                       |
|18    <br>    ([D18](#day-18-2020718))            | 19   <br>     ([D19](#day-19-2022719))            | 20   <br>    ([D20](#day-20-2022720))            | 21       <br>    ([D21](#day-21-2022721))         | 22     <br>    ([D22](#day-22-2022722))                         | 23     <br>    ([D23](#day-23-2022723))                         | 24    <br>    ([D24](#day-24-2022724))                        | 
|25      <br>    ([D25](#day-25-2022725))             | 26         <br>    ([D26](#day-26-2022726))           | 27         <br>    ([D27](#day-27-2022727))           | 28       <br>    ([D28](#day-28-2022728))           | 29         <br>    ([D29](#day-29-2022729))                    | 30        <br>    ([D30](#day-30-2022730))                     | 31     <br>    ([D31](#day-31-2022731))                           |

------

## Day 1 2022/7/1

### OS Tranining Camp

åœ¨Telegramç¾¤é‡Œçœ‹åˆ°äº†å¼ æ±‰ä¸œè€å¸ˆåˆ†äº«çš„OSè®­ç»ƒè¥é“¾æ¥ï¼Œå› ä¸ºæœ¬ç§‘æ²¡æœ‰å¥½å¥½å­¦ä¹ OSè¯¾ç¨‹ï¼Œæœ€è¿‘åˆçœ‹äº†è’‹ç‚å²©è€å¸ˆçš„å‡ èŠ‚ç½‘è¯¾ï¼Œæ·±å—æ„Ÿè§¦ï¼Œæœ€å…³é”®çš„æ˜¯è¿™é—¨è¯¾ç¨‹è¿˜æ˜¯ç”¨Rustæ¥å®ç°çš„ï¼Œé‚å†³å®šé‡æ–°å­¦ä¹ OSã€‚æˆ‘ä»å»å¹´å°±å…¥å‘äº†Rustï¼Œå½“æ—¶å°±æ˜¯å•ƒsteve klabnikçš„é‚£æœ¬TRPLï¼Œå½“æ—¶æ„Ÿè§‰è¿˜æœ‰è¿™ç§è¯­è¨€ï¼Œè¿ä¹¦éƒ½æ˜¯å¼€æºçš„ï¼Œè€Œä¸”é…ç½®è¿‡ç¨‹å®Œå…¨æ— ç—›ï¼Œä¸€è¡Œå‘½ä»¤å°±å®Œäº‹äº†ã€‚è™½ç„¶å·²ç»å•ƒå®Œäº†ä¸€éTRPLï¼Œä½†æ˜¯Rustæœ‰äº›ä¸œè¥¿è¿˜æ˜¯å¤ªéš¾ï¼Œå„ç§ä¸œè¥¿å¾ˆçç¢ã€‚æœ€ä¸ºä¸»è¦çš„åŸå› è¿˜æ˜¯ç¼ºä¹å®è·µã€‚

æ­£å¥½é€šè¿‡è¿™ä¸ªæœºä¼šé‡æ–°è®¤è¯†OSï¼ŒåŠ æ·±å¯¹Rustçš„ç†è§£ã€‚

ä»Šå¤©åœ¨GitHub classroomé‡Œé…ç½®äº†é¡¹ç›®ï¼Œä¹‹ååœ¨codespaceä¸­å®Œæˆäº†rustï¼Œriscvå·¥å…·é“¾çš„å®‰è£…é…ç½®ï¼ŒåŒæ—¶æ­£åœ¨çœ‹lab0-0çš„æ–‡æ¡£ã€‚

codespaceï¼š
* Pros:
    * no need to configure the proxy
    * network speed is fast
* Cons:
    * some bugs
    * rust-analyzer doesn't work well

### Plans: 

å®Œæˆscheduleä¸­çš„Rustå°æµ‹è¯•
å¿«é€Ÿå­¦ä¹ riscvç›¸å…³çŸ¥è¯†

## Day 2 2022/7/2

### OS Training Camp

è™½ç„¶codespaceå¾ˆæ–¹ä¾¿ï¼Œä¸ç”¨é…ç½®proxyï¼Œä½†æ˜¯å»¶è¿Ÿä¹Ÿå¤ªé«˜äº†å§ï¼Œè€Œä¸”rust-analyzerè¿˜æœ‰bugï¼Œç„¶åæˆ‘çªç„¶æƒ³èµ·æ¥å‰æ®µæ—¶é—´è¿˜æœ‰ä¸€å°é—²ç½®çš„åä¸ºäº‘æœåŠ¡å™¨ï¼ŒUbuntuå°±æ˜¯ä¸åŒæŠ˜è…¾ï¼Œç„¶åå°†codespaceç¯å¢ƒè¿ç§»åˆ°åä¸ºäº‘ï¼Œé…ç½®å¥½ç¯å¢ƒä¹‹åå°±å¯ä»¥å¹²æ´»äº†ã€‚

éœ€è¦åšçš„ä¸å¤šï¼Œæ— éæ˜¯æ¢ä¸€ä¸ªæºï¼Œä¹‹årusttoolchainï¼Œriscvé‡æ–°ä¸‹è½½ç¼–è¯‘ï¼Œå°±æ˜¯è¿™ä¸ªç¼–è¯‘é€Ÿåº¦æœ‰ç‚¹æ…¢ã€‚

* rust-toolchain
  * ä½¿ç”¨ustcæº
    
    ```shell
    <!-- export RUSTUP_DIST_SERVER=https://mirrors.tuna.edu.cn/rustup
    export RUSTUP_UPDATE_ROOT=https://mirrors.tuna.edu.cn/rustup/rustup -->
    export RUSTUP_DIST_SERVER=https://mirrors.ustc.edu.cn/rust-static
    export RUSTUP_UPDATE_ROOT=https://mirrors.ustc.edu.cn/rust-static/rustup
    ```
  * å®‰è£…rust
    ```shell
    curl https://sh.rustup.rs -sSf | sh
    ```
  * é…ç½®cargoï¼Œåœ¨`~/.cargo/config`ä¸­æ·»åŠ ï¼š
    ```shell
    <!-- [source.crates-io]
    replace-with = 'tuna'

    [source.tuna]
    registry = "https://mirrors.tuna.tsinghua.edu.cn/git/crates.io-index.git" -->
    [source.crates-io]
    registry = "https://github.com/rust-lang/crates.io-index"
    replace-with = 'ustc'
    [source.ustc]
    registry = "git://mirrors.ustc.edu.cn/crates.io-index"
    ```
* riscv
  * ä»å®˜ç½‘ä¸‹è½½æºç 
    ```shell
    wget https://download.qemu.org/qemu-7.0.0.tar.xz
    ```
    *è§£å‹æ—¶ç”¨å‘½ä»¤* `tar xvJf qemu*`
  * å®‰è£…ç¼–è¯‘æ‰€éœ€ä¾èµ–
    ```shell
    sudo apt install autoconf automake autotools-dev curl libmpc-dev libmpfr-dev libgmp-dev \
              gawk build-essential bison flex texinfo gperf libtool patchutils bc \
              zlib1g-dev libexpat-dev pkg-config  libglib2.0-dev libpixman-1-dev git tmux python3 ninja-build
    ```
  * ç¼–è¯‘
    ```shell
    cd qemu-7.0.0
    ./configure --target-list=riscv64-softmmu,riscv64-linux-user
    make -j$(nproc)
    ```
  * å®‰è£…
    ```shell
    sudo make install
    ```
    è¿™ä¼šå°†qemuå®‰è£…åˆ°`/usr/local/share`ç›®å½•ä¸‹,ä¹‹ååœ¨`~/.zshrc`ä¸­æ·»åŠ å¦‚ä¸‹
    ```shell
    export PATH=$PATH:/home/aucker/Downloads/build/qemu-7.0.0/riscv64-softmmu
    export PATH=$PATH:/home/aucker/Downloads/build/qemu-7.0.0/riscv64-linux-user
    export PATH=$PATH:/home/aucker/Downloads/build/qemu-7.0.0
    ```
    ä¹‹åç¡®è®¤riscvçš„ç‰ˆæœ¬
    ```shell
    âœ  qemu-7.0.0 qemu-system-riscv64 --version
    QEMU emulator version 7.0.0
    Copyright (c) 2003-2022 Fabrice Bellard and the QEMU Project developers
    âœ  qemu-7.0.0 qemu-riscv64 --version
    qemu-riscv64 version 7.0.0
    Copyright (c) 2003-2022 Fabrice Bellard and the QEMU Project developers
    ```

* rCore-Tutorialï¼š

    å¥½åƒå¿˜è®°äº†åä¸ºäº‘gitä¸å¥½ç”¨ï¼Œæˆ‘ç›´æ¥å‚»çœ¼ğŸ˜¯ï¼Œéš¾é“å¿…é¡»è¦å»codespaceå—ï¼Ÿ:cry:å…¶å®WSL2ä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©:yummy:

```shell
âœ  qemu-7.0.0 realpath -s riscv64-mmu
/home/aucker/Downloads/build/qemu-7.0.0/riscv64-mmu
```
`realpath` can get the full path of the file.

## Day 3 2022/7/3

### OS Training Camp

ä»Šå¤©è·Ÿç€æ•™ç¨‹å®Œæˆäº†ç¬¬ä¸€éƒ¨åˆ†çš„å®éªŒã€‚

ç¾¤å‹åˆ†äº«äº†ä¸€å¼ å…³äºæ™ºèƒ½æŒ‡é’ˆçš„å›¾ç‰‡ï¼š
![smart pointer in Rust](../images/rust_smart_pointer.jpg)

æ­¥éª¤å¦‚ä¸‹ï¼š
* 